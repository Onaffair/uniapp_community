{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n\t<view>\n\t\t<activity-reminder />\n\t\t<view>\n\t\t\t<head-top head-title=\"\" :go-back=\"false\"></head-top>\n\t\t</view>\n\t\t<!-- 使用动态计算高度 -->\n\t\t<view style=\"display: block; height: calc(100vh - 100px); overflow-y: auto;\">\n\t\t\t<view v-if=\"tabStore.tab === 0\">\n\t\t\t\t<home />\n\t\t\t</view>\n\t\t\t<view v-if=\"tabStore.tab === 1\">\n\t\t\t\t<my-chat />\n\t\t\t</view>\n\t\t\t<view v-if=\"tabStore.tab === 2\">\n\t\t\t\t<activity />\n\t\t\t</view>\n\t\t\t<view v-if=\"tabStore.tab === 3\">\n\t\t\t\t<personal-center />\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"tabbar-box\">\n\t\t\t<view class=\"tabbar\">\n\t\t\t\t<view \n\t\t\t\t\tclass=\"tabbar-item\" \n\t\t\t\t\t:class=\"{ active: tabStore.tab === 0 }\"\n\t\t\t\t\t@click=\"tabStore.setTab(0)\"\n\t\t\t\t>\n\t\t\t\t\t<text class=\"iconfont icon-home-o\"></text>\n\t\t\t\t\t<text class=\"text\">首页</text>\n\t\t\t\t</view>\n\t\t\t\t<view \n\t\t\t\t\tclass=\"tabbar-item\" \n\t\t\t\t\t:class=\"{ active: tabStore.tab === 1 }\"\n\t\t\t\t\t@click=\"tabStore.setTab(1)\"\n\t\t\t\t>\n\t\t\t\t\t<text class=\"iconfont icon-chat-o\"></text>\n\t\t\t\t\t<text class=\"text\">聊天</text>\n\t\t\t\t</view>\n\t\t\t\t<view \n\t\t\t\t\tclass=\"tabbar-item\" \n\t\t\t\t\t:class=\"{ active: tabStore.tab === 2 }\"\n\t\t\t\t\t@click=\"tabStore.setTab(2)\"\n\t\t\t\t>\n\t\t\t\t\t<text class=\"iconfont icon-fire-o\"></text>\n\t\t\t\t\t<text class=\"text\">活动</text>\n\t\t\t\t</view>\n\t\t\t\t<view \n\t\t\t\t\tclass=\"tabbar-item\" \n\t\t\t\t\t:class=\"{ active: tabStore.tab === 3 }\"\n\t\t\t\t\t@click=\"tabStore.setTab(3)\"\n\t\t\t\t>\n\t\t\t\t\t<text class=\"iconfont icon-user-o\"></text>\n\t\t\t\t\t<text class=\"text\">个人中心</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport HeadTop from \"@/components/Head/Head.vue\";\nimport { useTabStore } from \"@/store/tabStore\";\nimport Home from \"@/pages/Home/Home.vue\";\nimport MyChat from \"@/pages/Chat/MyChat.vue\";\nimport Activity from \"@/pages/Home/Activity.vue\";\nimport PersonalCenter from \"@/pages/PersonalCenter/PersonalCenter.vue\";\nimport { useUserStore } from \"@/store/userStore\";\nimport { onBeforeMount } from \"vue\";\nimport { getFollowList, getFriend, getFriendRequest, reFreshToken } from \"@/api/userAPI\";\nimport { getCityAndCategory, getJoinedActivity, getUserActivity } from \"@/api/activityAPI\";\nimport { useWebSocketStore } from \"@/store/websocketStore\";\nimport { geyMyGroup } from \"@/api/GroupApI\";\nimport ActivityReminder from \"@/components/ActivityReminder/ActivityReminder.vue\";\n\nconst tabStore = useTabStore();\nconst userStore = useUserStore();\nlet ws = null;\n\nonBeforeMount(() => {\n\tif (userStore.getIsLogin()) {\n\t\treFreshToken()\n\t\t\t.then((res) => {\n\t\t\t\tif (res?.code !== 200) return;\n\t\t\t\t\n\t\t\t\tgetJoinedActivity();\n\t\t\t\tgetUserActivity()\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tuserStore.setMyActivity(res?.data);\n\t\t\t\t\t});\n\t\t\t\tws = useWebSocketStore();\n\t\t\t\tgetFriend();\n\t\t\t\tgetFollowList()\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tuserStore.setFollowData(res?.data);\n\t\t\t\t\t});\n\t\t\t\tgetFriendRequest()\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tuserStore.setSystemInfo(res?.data);\n\t\t\t\t\t});\n\t\t\t\tgeyMyGroup();\n\t\t\t});\n\t}\n\tgetCityAndCategory();\n});\n</script>\n\n<style>\n.tabbar-box {\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\theight: 100px;\n\tbackground-color: #ffffff;\n\tbox-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.tabbar {\n\tdisplay: flex;\n\theight: 100%;\n\talign-items: center;\n\tjustify-content: space-around;\n}\n\n.tabbar-item {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tflex: 1;\n\theight: 100%;\n}\n\n.tabbar-item.active {\n\tcolor: #1989fa;\n}\n\n.text {\n\tfont-size: 24rpx;\n\tmargin-top: 5rpx;\n}\n</style>\n","import MiniProgramPage from 'D:/Code/uni-appProject/uni/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useTabStore","useUserStore","onBeforeMount","reFreshToken","getJoinedActivity","getUserActivity","res","useWebSocketStore","getFriend","getFollowList","getFriendRequest","geyMyGroup","getCityAndCategory","MiniProgramPage"],"mappings":";;;;;;;;;;;AA6DA,MAAM,UAAU,MAAW;AAE3B,MAAM,OAAO,MAAW;AACxB,MAAM,SAAS,MAAW;AAC1B,MAAM,WAAW,MAAW;AAC5B,MAAM,iBAAiB,MAAW;AAOlC,MAAM,mBAAmB,MAAW;;;;AAEpC,UAAM,WAAWA,eAAW,YAAA;AAC5B,UAAM,YAAYC,gBAAY,aAAA;AAG9BC,kBAAAA,cAAc,MAAM;AACnB,UAAI,UAAU,cAAc;AAC3BC,iCAAc,EACZ,KAAK,CAAC,QAAQ;AACd,eAAI,2BAAK,UAAS;AAAK;AAEvBC,0BAAAA;AACAC,0CAAiB,EACf,KAAK,CAAAC,SAAO;AACZ,sBAAU,cAAcA,QAAA,gBAAAA,KAAK,IAAI;AAAA,UACvC,CAAM;AACGC,+BAAAA;AACLC,sBAAAA;AACAC,oCAAe,EACb,KAAK,CAAAH,SAAO;AACZ,sBAAU,cAAcA,QAAA,gBAAAA,KAAK,IAAI;AAAA,UACvC,CAAM;AACFI,uCAAkB,EAChB,KAAK,CAAAJ,SAAO;AACZ,sBAAU,cAAcA,QAAA,gBAAAA,KAAK,IAAI;AAAA,UACvC,CAAM;AACFK,uBAAAA;QACJ,CAAI;AAAA,MACF;AACDC,sBAAAA;IACD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvGD,GAAG,WAAWC,SAAe;"}