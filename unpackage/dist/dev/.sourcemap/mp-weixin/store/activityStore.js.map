{"version":3,"file":"activityStore.js","sources":["store/activityStore.js"],"sourcesContent":["// activityStore.js\r\nimport { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\n\r\nexport const useActivityStore = defineStore('activityForm', () => {\r\n    const activityStatusList = [\r\n        {\r\n            id: 1,\r\n            name: \"等待报名\"\r\n        },\r\n        {\r\n            id: 2,\r\n            name: \"报名中\"\r\n        },\r\n        {\r\n            id: 3,\r\n            name: \"报名人数已满\"\r\n        },\r\n        {\r\n            id: 4,\r\n            name: \"活动进行中\"\r\n        },\r\n        {\r\n            id: 5,\r\n            name: \"活动已结束\"\r\n        },\r\n        {\r\n            id: 6,\r\n            name: \"活动已取消\"\r\n        }\r\n    ]\r\n    const cityList = ref([])\r\n    const categoryList = ref([])\r\n\r\n    // 状态定义\r\n    const formData = ref({\r\n        title: '',\r\n        categoryId: 0,\r\n        highlight: '',\r\n        content: '',\r\n        images: [],\r\n        city: 0,\r\n        address: '',\r\n        beginTime: '',\r\n        endTime: '',\r\n        leastJoinNum: '',\r\n        mostJoinNum: '',\r\n        status: 0,\r\n        joinNum: 0,\r\n        collectNum: ''\r\n    })\r\n\r\n    const setCityList = (data) => {\r\n        cityList.value = []\r\n        cityList.value.push(...data)\r\n    }\r\n    \r\n    const setCategoryList = (data) => {\r\n        categoryList.value = []\r\n        categoryList.value.push(...data)\r\n    }\r\n\r\n    // 验证规则\r\n    const validationRules = {\r\n        title: v => !!v,\r\n        categoryId: v => v > 0,\r\n        highlight: v => !!v,\r\n        content: v => !!v,\r\n        leastJoinNum: v => !!v,\r\n        mostJoinNum: v => !!v,\r\n        beginTime: v => !!v,\r\n        endTime: v => !!v,\r\n        address: v => !!v,\r\n        city: v => v > 0\r\n    }\r\n\r\n    // 计算验证状态\r\n    const isValid = computed(() => {\r\n        return Object.entries(validationRules).every(([key, validate]) =>\r\n            validate(formData.value[key])\r\n        )\r\n    })\r\n\r\n    // 更新表单数据的方法\r\n    const updateFormData = (payload) => {\r\n        Object.keys(payload).forEach(key => {\r\n            if (key in formData.value) {\r\n                formData.value[key] = payload[key]\r\n            }\r\n        })\r\n    }\r\n\r\n    const clearFormData = () => {\r\n        formData.value = {\r\n            title: '',\r\n            categoryId: 0,\r\n            highlight: '',\r\n            content: '',\r\n            images: [],\r\n            city: 0,\r\n            address: '',\r\n            beginTime: '',\r\n            endTime: '',\r\n            leastJoinNum: '',\r\n            mostJoinNum: '',\r\n            status: 0,\r\n            joinNum: 0,\r\n            collectNum: ''\r\n        }\r\n    }\r\n    \r\n    return {\r\n        activityStatusList,\r\n        cityList,\r\n        categoryList,\r\n        setCityList,\r\n        setCategoryList,\r\n        formData,\r\n        isValid,\r\n        updateFormData,\r\n        clearFormData,\r\n    }\r\n}, {\r\n    persist: {\r\n        enabled: true,\r\n        key: 'activityStore'\r\n    }\r\n}) "],"names":["defineStore","ref","computed"],"mappings":";;AAIY,MAAC,mBAAmBA,cAAAA,YAAY,gBAAgB,MAAM;AAC9D,QAAM,qBAAqB;AAAA,IACvB;AAAA,MACI,IAAI;AAAA,MACJ,MAAM;AAAA,IACT;AAAA,IACD;AAAA,MACI,IAAI;AAAA,MACJ,MAAM;AAAA,IACT;AAAA,IACD;AAAA,MACI,IAAI;AAAA,MACJ,MAAM;AAAA,IACT;AAAA,IACD;AAAA,MACI,IAAI;AAAA,MACJ,MAAM;AAAA,IACT;AAAA,IACD;AAAA,MACI,IAAI;AAAA,MACJ,MAAM;AAAA,IACT;AAAA,IACD;AAAA,MACI,IAAI;AAAA,MACJ,MAAM;AAAA,IACT;AAAA,EACJ;AACD,QAAM,WAAWC,cAAG,IAAC,EAAE;AACvB,QAAM,eAAeA,cAAG,IAAC,EAAE;AAG3B,QAAM,WAAWA,cAAAA,IAAI;AAAA,IACjB,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,WAAW;AAAA,IACX,SAAS;AAAA,IACT,QAAQ,CAAE;AAAA,IACV,MAAM;AAAA,IACN,SAAS;AAAA,IACT,WAAW;AAAA,IACX,SAAS;AAAA,IACT,cAAc;AAAA,IACd,aAAa;AAAA,IACb,QAAQ;AAAA,IACR,SAAS;AAAA,IACT,YAAY;AAAA,EACpB,CAAK;AAED,QAAM,cAAc,CAAC,SAAS;AAC1B,aAAS,QAAQ,CAAE;AACnB,aAAS,MAAM,KAAK,GAAG,IAAI;AAAA,EAC9B;AAED,QAAM,kBAAkB,CAAC,SAAS;AAC9B,iBAAa,QAAQ,CAAE;AACvB,iBAAa,MAAM,KAAK,GAAG,IAAI;AAAA,EAClC;AAGD,QAAM,kBAAkB;AAAA,IACpB,OAAO,OAAK,CAAC,CAAC;AAAA,IACd,YAAY,OAAK,IAAI;AAAA,IACrB,WAAW,OAAK,CAAC,CAAC;AAAA,IAClB,SAAS,OAAK,CAAC,CAAC;AAAA,IAChB,cAAc,OAAK,CAAC,CAAC;AAAA,IACrB,aAAa,OAAK,CAAC,CAAC;AAAA,IACpB,WAAW,OAAK,CAAC,CAAC;AAAA,IAClB,SAAS,OAAK,CAAC,CAAC;AAAA,IAChB,SAAS,OAAK,CAAC,CAAC;AAAA,IAChB,MAAM,OAAK,IAAI;AAAA,EAClB;AAGD,QAAM,UAAUC,cAAAA,SAAS,MAAM;AAC3B,WAAO,OAAO,QAAQ,eAAe,EAAE;AAAA,MAAM,CAAC,CAAC,KAAK,QAAQ,MACxD,SAAS,SAAS,MAAM,GAAG,CAAC;AAAA,IAC/B;AAAA,EACT,CAAK;AAGD,QAAM,iBAAiB,CAAC,YAAY;AAChC,WAAO,KAAK,OAAO,EAAE,QAAQ,SAAO;AAChC,UAAI,OAAO,SAAS,OAAO;AACvB,iBAAS,MAAM,GAAG,IAAI,QAAQ,GAAG;AAAA,MACpC;AAAA,IACb,CAAS;AAAA,EACJ;AAED,QAAM,gBAAgB,MAAM;AACxB,aAAS,QAAQ;AAAA,MACb,OAAO;AAAA,MACP,YAAY;AAAA,MACZ,WAAW;AAAA,MACX,SAAS;AAAA,MACT,QAAQ,CAAE;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,MACT,WAAW;AAAA,MACX,SAAS;AAAA,MACT,cAAc;AAAA,MACd,aAAa;AAAA,MACb,QAAQ;AAAA,MACR,SAAS;AAAA,MACT,YAAY;AAAA,IACf;AAAA,EACJ;AAED,SAAO;AAAA,IACH;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACH;AACL,GAAG;AAAA,EACC,SAAS;AAAA,IACL,SAAS;AAAA,IACT,KAAK;AAAA,EACR;AACL,CAAC;;"}