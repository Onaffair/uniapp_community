{"version":3,"file":"Login.js","sources":["components/Login/Login.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovQ29kZS91bmktYXBwUHJvamVjdC91bmkvY29tcG9uZW50cy9Mb2dpbi9Mb2dpbi52dWU"],"sourcesContent":["<template>\n  <view class=\"wrapper\">\n    <view class=\"container\">\n      <view class=\"title\">hello，欢迎回来</view>\n      <view class=\"account-form\">\n        <view class=\"account-form-group has-error\">\n          <!-- 下面这行是为了避免自动填充，触发focus和blur事件 -->\n          <input type=\"text\" name=\"txtuserName\" style=\"display: none\" />\n          <input\n            type=\"text\"\n            name=\"txtuserName\"\n            class=\"account-form-control js-input-name\"\n            v-model.trim=\"name\"\n            autocomplete=\"off\"\n            maxlength=\"20\"\n            placeholder=\"用户名\"\n          />\n        </view>\n        <view class=\"account-form-group has-error\">\n          <!-- 下面这行是为了避免自动填充，触发focus和blur事件 -->\n          <input :type=\"inputType\" name=\"txtPassword\" style=\"display: none\" />\n          <input\n            :type=\"inputType\"\n            name=\"txtPassword\"\n            class=\"account-form-control js-input-password\"\n            autocomplete=\"off\"\n            v-model.trim=\"password\"\n            maxlength=\"20\"\n            placeholder=\"请输入密码\"\n          />\n          <text\n            class=\"imwap-visibility js-showpw iconfont\"\n            :class=\"passwordClass\"\n            @click=\"togglePasswordVisibility\"\n          ></text>\n        </view>\n        <view class=\"account-form-group button-row\">\n          <view class=\"account-form-tip js-error\"></view>\n          <view\n            class=\"account-form-btn js-btn-login\"\n            @click=\"submit\"\n          >\n            登录\n          </view>\n        </view>\n      </view>\n\t  <view>\n\t\t  <text style=\"display: flex;justify-content: center\" @click=\"goToRegister\">没有账号 去注册</text>\n\t  </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { encrypt } from '../../util/crypto';\nimport { postLoginInfo } from '@/api/userAPI';\n\n// 响应式数据\nconst name = ref('');\nconst password = ref('');\nconst inputType = ref('password');\nconst passwordClass = ref('icon-input-show');\n\n// 切换密码可见性\nconst togglePasswordVisibility = () => {\n  inputType.value = inputType.value === 'password' ? 'text' : 'password';\n  passwordClass.value = passwordClass.value === 'icon-input-show' ? 'icon-input-password' : 'icon-input-show';\n};\n\n// 跳转到注册页面\nconst goToRegister = () => {\n  uni.navigateTo({\n    url: '/pages/register/register'\n  });\n};\n\n// 提交登录\nconst submit = async () => {\n  const userName = name.value;\n  const userPassword = password.value;\n\n  if (validateUserName(userName) !== 'ok') {\n    uni.showToast({\n      title: '用户名格式不正确',\n      icon: 'none'\n    });\n    return;\n  }\n  if (validatePassword(userPassword) !== 'ok') {\n    uni.showToast({\n      title: '密码格式不正确',\n      icon: 'none'\n    });\n    return;\n  }\n  \n  try {\n    await postLoginInfo({\n      account: userName,\n      password: encrypt(userPassword)\n    });\n  } catch (error) {\n    uni.showToast({\n      title: '登录失败',\n      icon: 'none'\n    });\n  }\n};\n\n// 验证用户名\nconst validateUserName = (userName) => {\n  if (!userName) return '用户名不能为空';\n  return 'ok';\n};\n\n// 验证密码\nconst validatePassword = (password) => {\n  if (!password) return '密码不能为空';\n  if (password.length < 3) return '密码长度为6-20位，请重新输入';\n  return 'ok';\n};\n</script>\n\n<style lang=\"scss\">\n.wrapper {\n  background-color: #fff;\n  height: 100%;\n  width: 100%;\n}\n\n.container {\n  padding: 32rpx;\n  font-size: 28rpx;\n\n  .title {\n    font-size: 52rpx;\n    font-weight: bold;\n  }\n\n  .account-form {\n    text-align: center;\n    margin-top: 40rpx;\n\n    .account-form-group {\n      position: relative;\n      overflow: hidden;\n      padding-bottom: 16rpx;\n\n      .account-form-control {\n        margin-bottom: 8rpx;\n        padding-left: 8rpx;\n        display: block;\n        width: 100%;\n        color: #787d82;\n        box-sizing: border-box;\n        border-bottom: 1px solid #d9dde1;\n        height: 80rpx;\n        font-size: 28rpx;\n      }\n\n      .account-form-tip {\n        display: none;\n        color: #ff2d50;\n        clear: both;\n        font-size: 24rpx;\n        line-height: 32rpx;\n        text-align: left;\n      }\n\n      .imwap-visibility {\n        position: absolute;\n        color: #333;\n        top: 24rpx;\n        right: 8rpx;\n        font-size: 32rpx;\n      }\n\n      .account-form-btn {\n        display: block;\n        margin-top: 32rpx;\n        color: #fff;\n        background: #f9a74b;\n        font-size: 32rpx;\n        line-height: 88rpx;\n        border-radius: 8rpx;\n      }\n    }\n  }\n\n  .forget-password-box {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-top: 8rpx;\n  }\n}\n</style> ","import Component from 'D:/Code/uni-appProject/uni/components/Login/Login.vue'\nwx.createComponent(Component)"],"names":["ref","uni","postLoginInfo","encrypt","password","Component"],"mappings":";;;;;;;AA2DA,UAAM,OAAOA,cAAAA,IAAI,EAAE;AACnB,UAAM,WAAWA,cAAAA,IAAI,EAAE;AACvB,UAAM,YAAYA,cAAAA,IAAI,UAAU;AAChC,UAAM,gBAAgBA,cAAAA,IAAI,iBAAiB;AAG3C,UAAM,2BAA2B,MAAM;AACrC,gBAAU,QAAQ,UAAU,UAAU,aAAa,SAAS;AAC5D,oBAAc,QAAQ,cAAc,UAAU,oBAAoB,wBAAwB;AAAA,IAC5F;AAGA,UAAM,eAAe,MAAM;AACzBC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAGA,UAAM,SAAS,YAAY;AACzB,YAAM,WAAW,KAAK;AACtB,YAAM,eAAe,SAAS;AAE9B,UAAI,iBAAiB,QAAQ,MAAM,MAAM;AACvCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AACD,UAAI,iBAAiB,YAAY,MAAM,MAAM;AAC3CA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,UAAI;AACF,cAAMC,0BAAc;AAAA,UAClB,SAAS;AAAA,UACT,UAAUC,YAAO,QAAC,YAAY;AAAA,QACpC,CAAK;AAAA,MACF,SAAQ,OAAO;AACdF,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AAAA,MACF;AAAA,IACH;AAGA,UAAM,mBAAmB,CAAC,aAAa;AACrC,UAAI,CAAC;AAAU,eAAO;AACtB,aAAO;AAAA,IACT;AAGA,UAAM,mBAAmB,CAACG,cAAa;AACrC,UAAI,CAACA;AAAU,eAAO;AACtB,UAAIA,UAAS,SAAS;AAAG,eAAO;AAChC,aAAO;AAAA,IACT;;;;;;;;;;;;;;;;;;;;;ACxHA,GAAG,gBAAgBC,SAAS;"}