{"version":3,"names":["name","common_vendor","ref","password","inputType","passwordClass","togglePasswordVisibility","value","goToRegister","index","navigateTo","url","submit","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","userName","userPassword","wrap","_callee$","_context","prev","next","validateUserName","showToast","title","icon","abrupt","validatePassword","api_userAPI","postLoginInfo","account","util_crypto","encrypt","t0","stop","apply","arguments","password2","length","wx","createComponent","_sfc_main"],"sources":["login.vue","RDovQ29kZS91bmktYXBwUHJvamVjdC91bmkvY29tcG9uZW50cy9sb2dpbi9sb2dpbi52dWU"],"sourcesContent":["<template>\n  <view class=\"wrapper\">\n    <view class=\"container\">\n      <view class=\"title\">hello，欢迎回来</view>\n      <view class=\"account-form\">\n        <view class=\"account-form-group has-error\">\n          <!-- 下面这行是为了避免自动填充，触发focus和blur事件 -->\n          <input type=\"text\" name=\"txtuserName\" style=\"display: none\" />\n          <input\n            type=\"text\"\n            name=\"txtuserName\"\n            class=\"account-form-control js-input-name\"\n            v-model.trim=\"name\"\n            autocomplete=\"off\"\n            maxlength=\"20\"\n            placeholder=\"用户名\"\n          />\n        </view>\n        <view class=\"account-form-group has-error\">\n          <!-- 下面这行是为了避免自动填充，触发focus和blur事件 -->\n          <input :type=\"inputType\" name=\"txtPassword\" style=\"display: none\" />\n          <input\n            :type=\"inputType\"\n            name=\"txtPassword\"\n            class=\"account-form-control js-input-password\"\n            autocomplete=\"off\"\n            v-model.trim=\"password\"\n            maxlength=\"20\"\n            placeholder=\"请输入密码\"\n          />\n          <text\n            class=\"imwap-visibility js-showpw iconfont\"\n            :class=\"passwordClass\"\n            @click=\"togglePasswordVisibility\"\n          ></text>\n        </view>\n        <view class=\"account-form-group button-row\">\n          <view class=\"account-form-tip js-error\"></view>\n          <view\n            class=\"account-form-btn js-btn-login\"\n            @click=\"submit\"\n          >\n            登录\n          </view>\n        </view>\n      </view>\n\t  <view>\n\t\t  <text style=\"display: flex;justify-content: center\" @click=\"goToRegister\">没有账号 去注册</text>\n\t  </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { encrypt } from '@/util/crypto';\nimport { postLoginInfo } from '@/api/userAPI';\n\n// 响应式数据\nconst name = ref('');\nconst password = ref('');\nconst inputType = ref('password');\nconst passwordClass = ref('icon-input-show');\n\n// 切换密码可见性\nconst togglePasswordVisibility = () => {\n  inputType.value = inputType.value === 'password' ? 'text' : 'password';\n  passwordClass.value = passwordClass.value === 'icon-input-show' ? 'icon-input-password' : 'icon-input-show';\n};\n\n// 跳转到注册页面\nconst goToRegister = () => {\n  uni.navigateTo({\n    url: '/pages/register/register'\n  });\n};\n\n// 提交登录\nconst submit = async () => {\n  const userName = name.value;\n  const userPassword = password.value;\n\n  if (validateUserName(userName) !== 'ok') {\n    uni.showToast({\n      title: '用户名格式不正确',\n      icon: 'none'\n    });\n    return;\n  }\n  if (validatePassword(userPassword) !== 'ok') {\n    uni.showToast({\n      title: '密码格式不正确',\n      icon: 'none'\n    });\n    return;\n  }\n  \n  try {\n    await postLoginInfo({\n      account: userName,\n      password: encrypt(userPassword)\n    });\n  } catch (error) {\n    uni.showToast({\n      title: '登录失败',\n      icon: 'none'\n    });\n  }\n};\n\n// 验证用户名\nconst validateUserName = (userName) => {\n  if (!userName) return '用户名不能为空';\n  return 'ok';\n};\n\n// 验证密码\nconst validatePassword = (password) => {\n  if (!password) return '密码不能为空';\n  if (password.length < 3) return '密码长度为6-20位，请重新输入';\n  return 'ok';\n};\n</script>\n\n<style lang=\"scss\">\n.wrapper {\n  background-color: #fff;\n  height: 100%;\n  width: 100%;\n}\n\n.container {\n  padding: 32rpx;\n  font-size: 28rpx;\n\n  .title {\n    font-size: 52rpx;\n    font-weight: bold;\n  }\n\n  .account-form {\n    text-align: center;\n    margin-top: 40rpx;\n\n    .account-form-group {\n      position: relative;\n      overflow: hidden;\n      padding-bottom: 16rpx;\n\n      .account-form-control {\n        margin-bottom: 8rpx;\n        padding-left: 8rpx;\n        display: block;\n        width: 100%;\n        color: #787d82;\n        box-sizing: border-box;\n        border-bottom: 1px solid #d9dde1;\n        height: 80rpx;\n        font-size: 28rpx;\n      }\n\n      .account-form-tip {\n        display: none;\n        color: #ff2d50;\n        clear: both;\n        font-size: 24rpx;\n        line-height: 32rpx;\n        text-align: left;\n      }\n\n      .imwap-visibility {\n        position: absolute;\n        color: #333;\n        top: 24rpx;\n        right: 8rpx;\n        font-size: 32rpx;\n      }\n\n      .account-form-btn {\n        display: block;\n        margin-top: 32rpx;\n        color: #fff;\n        background: #f9a74b;\n        font-size: 32rpx;\n        line-height: 88rpx;\n        border-radius: 8rpx;\n      }\n    }\n  }\n\n  .forget-password-box {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-top: 8rpx;\n  }\n}\n</style> ","import Component from 'D:/Code/uni-appProject/uni/components/login/login.vue'\nwx.createComponent(Component)"],"mappings":";;;;;;;;;;;IA2DA,IAAMA,IAAA,GAAOC,aAAA,CAAAC,GAAA,CAAI,EAAE;IACnB,IAAMC,QAAA,GAAWF,aAAA,CAAAC,GAAA,CAAI,EAAE;IACvB,IAAME,SAAA,GAAYH,aAAA,CAAAC,GAAA,CAAI,UAAU;IAChC,IAAMG,aAAA,GAAgBJ,aAAA,CAAAC,GAAA,CAAI,iBAAiB;IAG3C,IAAMI,wBAAA,GAA2B,SAA3BA,yBAAA,EAAiC;MACrCF,SAAA,CAAUG,KAAA,GAAQH,SAAA,CAAUG,KAAA,KAAU,aAAa,SAAS;MAC5DF,aAAA,CAAcE,KAAA,GAAQF,aAAA,CAAcE,KAAA,KAAU,oBAAoB,wBAAwB;IAC5F;IAGA,IAAMC,YAAA,GAAe,SAAfA,aAAA,EAAqB;MACzBP,aAAA,CAAAQ,KAAA,CAAIC,UAAA,CAAW;QACbC,GAAA,EAAK;MACT,CAAG;IACH;IAGA,IAAMC,MAAA;MAAA,IAAAC,IAAA,GAAAC,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,CAAS,SAAAC,QAAA;QAAA,IAAAC,QAAA,EAAAC,YAAA;QAAA,OAAAJ,oBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACPN,QAAA,GAAWlB,IAAA,CAAKO,KAAA;cAChBY,YAAA,GAAehB,QAAA,CAASI,KAAA;cAAA,MAE1BkB,gBAAA,CAAiBP,QAAQ,MAAM;gBAAAI,QAAA,CAAAE,IAAA;gBAAA;cAAA;cACjCvB,aAAA,CAAAQ,KAAA,CAAIiB,SAAA,CAAU;gBACZC,KAAA,EAAO;gBACPC,IAAA,EAAM;cACZ,CAAK;cAAA,OAAAN,QAAA,CAAAO,MAAA;YAAA;cAAA,MAGCC,gBAAA,CAAiBX,YAAY,MAAM;gBAAAG,QAAA,CAAAE,IAAA;gBAAA;cAAA;cACrCvB,aAAA,CAAAQ,KAAA,CAAIiB,SAAA,CAAU;gBACZC,KAAA,EAAO;gBACPC,IAAA,EAAM;cACZ,CAAK;cAAA,OAAAN,QAAA,CAAAO,MAAA;YAAA;cAAAP,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAKKO,WAAA,CAAAC,aAAA,CAAc;gBAClBC,OAAA,EAASf,QAAA;gBACTf,QAAA,EAAU+B,WAAA,CAAOC,OAAA,CAAChB,YAAY;cACpC,CAAK;YAAA;cAAAG,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAc,EAAA,GAAAd,QAAA;cAEDrB,aAAA,CAAAQ,KAAA,CAAIiB,SAAA,CAAU;gBACZC,KAAA,EAAO;gBACPC,IAAA,EAAM;cACZ,CAAK;YAAA;YAAA;cAAA,OAAAN,QAAA,CAAAe,IAAA;UAAA;QAAA,GAAApB,OAAA;MAAA,CAEL;MAAA,gBA9BML,OAAA;QAAA,OAAAC,IAAA,CAAAyB,KAAA,OAAAC,SAAA;MAAA;IAAA,GA8BN;IAGA,IAAMd,gBAAA,GAAmB,SAAnBA,iBAAoBP,QAAA,EAAa;MACrC,IAAI,CAACA,QAAA,EAAU,OAAO;MACtB,OAAO;IACT;IAGA,IAAMY,gBAAA,GAAmB,SAAnBA,iBAAoBU,SAAA,EAAa;MACrC,IAAI,CAACA,SAAA,EAAU,OAAO;MACtB,IAAIA,SAAA,CAASC,MAAA,GAAS,GAAG,OAAO;MAChC,OAAO;IACT;;;;;;;;;;;;;;;;;;;;;;;;;ACxHAC,EAAA,CAAGC,eAAA,CAAgBC,SAAS","ignoreList":[]}